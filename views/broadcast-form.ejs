<% // views/broadcast-form.ejs (–§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–Ø) %>

<%- contentFor('body') %>

<h1 class="h3 mb-3">–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</h1>

<% if (success) { %><div class="alert alert-success"><%= success %></div><% } %>
<% if (error) { %><div class="alert alert-danger"><%= error %></div><% } %>

<div class="card shadow-sm">
  <div class="card-body">
    <form method="POST" action="/broadcast" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="message" class="form-label">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (Markdown: *–∂–∏—Ä–Ω—ã–π*, _–∫—É—Ä—Å–∏–≤_)</label>
        <textarea name="message" id="message" class="form-control" rows="5" required></textarea>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="audio" class="form-label">–ê—É–¥–∏–æ-—Ñ–∞–π–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
          <input type="file" name="audio" id="audio" accept="audio/*" class="form-control" />
        </div>
        <div class="col-md-6 mb-3">
          <label for="targetAudience" class="form-label">–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è</label>
          <select class="form-select" id="targetAudience" name="targetAudience">
            <option value="all" selected>–í—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º</option>
            <option value="free_users">–¢–æ–ª—å–∫–æ —Å —Ç–∞—Ä–∏—Ñ–æ–º Free</option>
            <option value="premium_users">–¢–æ–ª—å–∫–æ —Å –ø–ª–∞—Ç–Ω—ã–º–∏ —Ç–∞—Ä–∏—Ñ–∞–º–∏</option>
          </select>
        </div>
      </div>

      <div class="row align-items-end">
          <div class="col-md-6 mb-3">
              <label for="scheduledAt" class="form-label">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
              <input type="datetime-local" class="form-control" id="scheduledAt" name="scheduledAt">
              <div class="form-text">–ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, –æ—Ç–ø—Ä–∞–≤–∫–∞ –±—É–¥–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π.</div>
          </div>
          <div class="col-md-6 mb-3 d-flex align-items-center">
              <div class="form-check">
                  <input class="form-check-input" type="checkbox" name="disable_notification" id="disable_notification">
                  <label class="form-check-label" for="disable_notification">–¢–∏—Ö–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ (–±–µ–∑ –∑–≤—É–∫–∞)</label>
              </div>
          </div>
      </div>
      
      <div class="d-flex flex-wrap gap-2">
        <button type="submit" name="action" value="preview" class="btn btn-outline-secondary">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–º–Ω–µ)</button>
        <button type="submit" name="action" value="send" class="btn btn-primary flex-grow-1" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å/–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Ä–∞—Å—Å—ã–ª–∫—É?')">üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å / –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </form>
  </div>
</div>